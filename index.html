<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fruit Roulette Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        .wheel-container {
            position: relative;
            width: 350px;
            height: 350px;
            margin: 0 auto;
        }
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 10px solid #f59e0b;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform: rotate(0deg);
            background: #fff;
        }
        .wheel.spinning {
            animation: spin 0.2s linear infinite;
        }
        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid #ef4444;
            z-index: 10;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0;
            z-index: 100;
        }
        .wheel-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
            border: 4px solid #f59e0b;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }
        .segment-label {
            position: absolute;
            left: 50%;
            top: 50%;
            transform-origin: left center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
            z-index: 2;
            width: 100px;
            text-align: center;
            margin-left: -50px;
            margin-top: -15px;
        }
        .modal-content {
            transition: all 0.3s ease-out;
        }
        .segment {
            position: absolute;
            width: 50%;
            height: 50%;
            left: 50%;
            top: 0;
            transform-origin: left bottom;
            clip-path: polygon(0 0, 100% 50%, 0 100%, 20% 50%);
        }
    </style>
</head>
<body class="bg-gradient-to-b from-green-50 to-blue-50 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-4xl w-full bg-white rounded-2xl shadow-xl p-6">
        <h1 class="text-4xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">
            Fruit Roulette
        </h1>
        <div class="flex flex-col lg:flex-row items-center justify-between gap-8">
            <!-- Wheel Section -->
            <div class="order-1 lg:order-none">
                <div class="wheel-container">
                    <div class="pointer"></div>
                    <div class="wheel">
                        <!-- Wheel segments will be generated by JavaScript -->
                    </div>
                    <div class="wheel-center"></div>
                </div>
            </div>
            <!-- Controls Section -->
            <div class="flex-1 max-w-md order-2 lg:order-none">
                <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Game Controls</h2>
                    <div class="mb-6">
                        <label for="betAmount" class="block text-sm font-medium text-gray-700 mb-1">Bet Amount</label>
                        <div class="flex">
                            <input type="number" id="betAmount" min="10" max="1000" value="50" 
                                   class="flex-1 px-4 py-2 border border-gray-300 rounded-l-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="increaseBet" class="bg-gray-200 px-3 border-t border-b border-r border-gray-300 hover:bg-gray-300 transition-colors">
                                +
                            </button>
                            <button id="decreaseBet" class="bg-gray-200 px-3 border-t border-b border-r border-gray-300 rounded-r-md hover:bg-gray-300 transition-colors">
                                -
                            </button>
                        </div>
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Select Fruit</label>
                        <div class="grid grid-cols-3 gap-3" id="fruitSelection">
                            <!-- Fruit buttons will be generated by JavaScript -->
                        </div>
                    </div>
                    <button id="spinButton" class="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-3 px-6 rounded-lg font-bold text-lg shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200">
                        SPIN THE WHEEL
                    </button>
                </div>
                <div class="mt-6 bg-gray-50 p-6 rounded-lg shadow-inner">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Game Stats</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Balance:</span>
                            <span id="balance" class="font-bold">1000</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Last Win:</span>
                            <span id="lastWin" class="font-bold">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Selected Fruit:</span>
                            <span id="selectedFruit" class="font-bold">None</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Result Modal -->
        <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white p-8 rounded-xl max-w-md w-full mx-4 text-center modal-content scale-95 opacity-0">
                <h2 class="text-2xl font-bold mb-4" id="resultTitle">You Won!</h2>
                <p class="text-lg mb-6" id="resultMessage">The wheel landed on <span class="font-bold">Apple</span> and you won <span class="font-bold text-green-600">100</span> coins!</p>
                <button id="closeModal" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    Continue
                </button>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function() {
            // Game configuration
            const fruits = [
                { name: "Apple", color: "#ef4444", emoji: "ðŸŽ", multiplier: 2 },
                { name: "Banana", color: "#facc15", emoji: "ðŸŒ", multiplier: 3 },
                { name: "Cherry", color: "#dc2626", emoji: "ðŸ’", multiplier: 5 },
                { name: "Grape", color: "#9333ea", emoji: "ðŸ‡", multiplier: 2 },
                { name: "Lemon", color: "#fde047", emoji: "ðŸ‹", multiplier: 3 },
                { name: "Orange", color: "#f97316", emoji: "ðŸŠ", multiplier: 2 },
                { name: "Peach", color: "#fb923c", emoji: "ðŸ‘", multiplier: 4 },
                { name: "Pear", color: "#84cc16", emoji: "ðŸ", multiplier: 3 },
                { name: "Pineapple", color: "#f59e0b", emoji: "ðŸ", multiplier: 5 },
                { name: "Strawberry", color: "#ef4444", emoji: "ðŸ“", multiplier: 4 },
                { name: "Watermelon", color: "#86efac", emoji: "ðŸ‰", multiplier: 3 },
                { name: "Kiwi", color: "#84cc16", emoji: "ðŸ¥", multiplier: 20 }
            ];
            // Game state
            let gameState = {
                balance: 1000,
                selectedFruit: null,
                betAmount: 50,
                spinning: false
            };
            // Initialize the wheel with precise segment and fruit positioning
            function initWheel() {
                const wheel = $('.wheel');
                wheel.empty();
                const segmentAngle = 360 / fruits.length;
                const radius = 150; // Half of wheel width
                fruits.forEach((fruit, index) => {
                    const angle = segmentAngle * index;
                    const midAngle = angle + segmentAngle / 2;
                    // Create segment
                    const segment = $('<div>').addClass('segment').css({
                        transform: `rotate(${angle}deg)`,
                        backgroundColor: fruit.color
                    });
                    // Calculate position for the fruit emoji
                    const emojiRadius = radius * 0.7; // Position emoji closer to center
                    const emojiX = radius + Math.cos((midAngle - 90) * Math.PI / 180) * emojiRadius;
                    const emojiY = radius + Math.sin((midAngle - 90) * Math.PI / 180) * emojiRadius;
                    // Create fruit label
                    const label = $('<div>').addClass('segment-label').css({
                        left: emojiX + 'px',
                        top: emojiY + 'px',
                        transform: `rotate(${midAngle}deg)`
                    }).text(fruit.emoji);
                    wheel.append(segment);
                    wheel.append(label);
                });
            }
            // Initialize fruit selection buttons
            function initFruitSelection() {
                const container = $('#fruitSelection');
                container.empty();
                fruits.forEach(fruit => {
                    const button = $(`
                        <button class="flex flex-col items-center justify-center p-3 rounded-lg border-2 border-transparent hover:border-gray-300 transition-all bg-white shadow-sm">
                            <span class="text-3xl">${fruit.emoji}</span>
                            <span class="text-xs mt-1 font-medium">${fruit.name}</span>
                        </button>
                    `);
                    button.on('click', function() {
                        if (gameState.spinning) return;
                        $('.wheel').find('div').css('opacity', 1);
                        gameState.selectedFruit = fruit;
                        $('#selectedFruit').text(fruit.name);
                        // Highlight selected button
                        $('#fruitSelection button').removeClass('border-blue-500 bg-blue-100 shadow-md');
                        button.addClass('border-blue-500 bg-blue-100 shadow-md');
                    });
                    container.append(button);
                });
            }
            // Initialize bet controls
            function initBetControls() {
                $('#increaseBet').on('click', function() {
                    if (gameState.spinning) return;
                    gameState.betAmount = Math.min(gameState.betAmount + 10, 1000);
                    $('#betAmount').val(gameState.betAmount);
                });
                $('#decreaseBet').on('click', function() {
                    if (gameState.spinning) return;
                    gameState.betAmount = Math.max(gameState.betAmount - 10, 10);
                    $('#betAmount').val(gameState.betAmount);
                });
                $('#betAmount').on('change', function() {
                    if (gameState.spinning) return;
                    let value = parseInt($(this).val());
                    if (isNaN(value)) value = 50;
                    gameState.betAmount = Math.min(Math.max(value, 10), 1000);
                    $(this).val(gameState.betAmount);
                });
            }
            // Spin the wheel
            function spinWheel() {
                if (gameState.spinning) {
                    alert('Wheel is already spinning!');
                    return;
                }
                if (!gameState.selectedFruit) {
                    alert('Please select a fruit first!');
                    return;
                }
                if (gameState.betAmount > gameState.balance) {
                    alert('Not enough balance for this bet!');
                    return;
                }
                gameState.spinning = true;
                gameState.balance -= gameState.betAmount;
                updateBalance();
                const wheel = $('.wheel');
                const spinButton = $('#spinButton');
                spinButton.prop('disabled', true).addClass('opacity-50');
                // Randomly select a result
                const resultIndex = Math.floor(Math.random() * fruits.length);
                const resultFruit = fruits[resultIndex];
                const segmentAngle = 360 / fruits.length;
                const targetAngle = 360 * 5 + (360 - (segmentAngle * resultIndex + segmentAngle/2));
                wheel.css('transform', `rotate(${targetAngle}deg)`);
                setTimeout(() => {
                    gameState.spinning = false;
                    spinButton.prop('disabled', false).removeClass('opacity-50');
                    let winAmount = 0;
                    if (resultFruit.name === gameState.selectedFruit.name) {
                        winAmount = gameState.betAmount * resultFruit.multiplier;
                        gameState.balance += winAmount;
                        updateBalance();
                        // Show win modal
                        showResultModal(true, resultFruit, winAmount);
                        createConfetti();
                    } else {
                        // Show lose modal
                        showResultModal(false, resultFruit);
                    }
                    $('#lastWin').text(winAmount > 0 ? `+${winAmount}` : "0");
                }, 5000);
            }
            // Show result modal
            function showResultModal(isWin, resultFruit, winAmount = 0) {
                const modal = $('#resultModal');
                const modalContent = modal.find('.modal-content');
                const title = $('#resultTitle');
                const message = $('#resultMessage');
                if (isWin) {
                    title.text("You Won!").removeClass('text-red-500').addClass('text-green-500');
                    message.html(`The wheel landed on <span class="font-bold">${resultFruit.name} ${resultFruit.emoji}</span> and you won <span class="font-bold text-green-600">${winAmount}</span> coins!`);
                } else {
                    title.text("You Lost").removeClass('text-green-500').addClass('text-red-500');
                    message.html(`The wheel landed on <span class="font-bold">${resultFruit.name} ${resultFruit.emoji}</span>. Better luck next time!`);
                }
                modal.fadeIn();
                setTimeout(() => {
                    modalContent.removeClass('scale-95 opacity-0').addClass('scale-100 opacity-100');
                }, 10);
            }
            // Close modal
            function closeModal() {
                const modal = $('#resultModal');
                const modalContent = modal.find('.modal-content');
                modalContent.removeClass('scale-100 opacity-100').addClass('scale-95 opacity-0');
                setTimeout(() => {
                    modal.fadeOut();
                }, 300);
            }
            // Create confetti effect
            function createConfetti() {
                const colors = ['#ef4444', '#f59e0b', '#10b981', '#3b82f6', '#8b5cf6'];
                for (let i = 0; i < 100; i++) {
                    const confetti = $('<div>').addClass('confetti').css({
                        left: Math.random() * 100 + '%',
                        top: -10,
                        backgroundColor: colors[Math.floor(Math.random() * colors.length)],
                        transform: `rotate(${Math.random() * 360}deg)`,
                        borderRadius: Math.random() > 0.5 ? '50%' : '0'
                    });
                    $('body').append(confetti);
                    const animationDuration = Math.random() * 3 + 2;
                    confetti.animate({
                        top: '100%',
                        left: `+=${(Math.random() - 0.5) * 100}`,
                        opacity: 1
                    }, animationDuration * 1000, 'linear', function() {
                        $(this).remove();
                    });
                }
            }
            // Update balance display
            function updateBalance() {
                $('#balance').text(gameState.balance);
            }
            // Initialize event listeners
            function initEventListeners() {
                $('#spinButton').on('click', spinWheel);
                $('#closeModal').on('click', closeModal);
            }
            // Initialize the game
            function initGame() {
                initWheel();
                initFruitSelection();
                initBetControls();
                initEventListeners();
                updateBalance();
            }
            initGame();
        });
    </script>
</body>
</html>
